<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Criação de pipelines de análise reprodutíveis em R - 4&nbsp; Controlo de versões com o Git</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./github.html" rel="next">
<link href="./project_start.html" rel="prev">
<link href="./images/cover.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script data-goatcounter="https://brodriguesco-raps-with-r.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>

<noscript>

    </noscript></head><body class="nav-sidebar floating"><img src="https://brodriguesco-raps-with-r.goatcounter.com/count?p=/test-noscript">





<link rel="stylesheet" href="epub.css">




<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part1_intro.html">Parte 1: Don’t Repeat Yourself</a></li><li class="breadcrumb-item"><a href="./git.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Controlo de versões com o Git</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Criação de pipelines de análise reprodutíveis em R</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/balima78/rap_pt" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./Criação-de-pipelines-de-análise-reprodutíveis-em-R.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./Criação-de-pipelines-de-análise-reprodutíveis-em-R.epub">
              <i class="bi bi-bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
    </div>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-1" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-1">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.facebook.com/sharer/sharer.php?u=|url|">
              <i class="bi bi-bi-facebook pe-1"></i>
            Facebook
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bem-vindo!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefácio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part1_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parte 1: Don't Repeat Yourself</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prerequisites.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Antes de começarmos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project_start.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Início do projecto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./git.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Controlo de versões com o Git</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Colaboração com desenvolvimento <em>Trunk-based</em></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fprog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Programação Funcional</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lit_prog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Programação letrada</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./part1_conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Conclusão da Parte 1</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part2_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parte 2: Write IT Down</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./project_rewrite.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Reescrever o nosso projecto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./repro_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Reproducibilidade básica: congelar pacotes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Código em pacote</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Testar o código</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./targets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Automatização com <code>{targets}</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./repro_cont.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Pipelines de análise reprodutíveis com o Docker</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ci_cd.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Continuous Integration &amp; Continuous Deployment</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./part2_conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Conclusão da Parte 2</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./book_conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Fim</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#instalar-e-abrir-uma-conta-no-github" id="toc-instalar-e-abrir-uma-conta-no-github" class="nav-link active" data-scroll-target="#instalar-e-abrir-uma-conta-no-github"><span class="header-section-number">4.1</span> Instalar e abrir uma conta no Github</a></li>
  <li><a href="#git-básico" id="toc-git-básico" class="nav-link" data-scroll-target="#git-básico"><span class="header-section-number">4.2</span> Git básico</a></li>
  <li><a href="#git-e-github" id="toc-git-e-github" class="nav-link" data-scroll-target="#git-e-github"><span class="header-section-number">4.3</span> Git e Github</a></li>
  <li><a href="#conhecendo-o-github" id="toc-conhecendo-o-github" class="nav-link" data-scroll-target="#conhecendo-o-github"><span class="header-section-number">4.4</span> Conhecendo o Github</a></li>
  <li><a href="#conclusão" id="toc-conclusão" class="nav-link" data-scroll-target="#conclusão"><span class="header-section-number">4.5</span> Conclusão</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/balima78/rap_pt/edit/main/git.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/balima78/rap_pt/issues" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part1_intro.html">Parte 1: Don’t Repeat Yourself</a></li><li class="breadcrumb-item"><a href="./git.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Controlo de versões com o Git</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Controlo de versões com o Git</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>O desenvolvimento de <em>software</em> moderno não seria possível sem sistemas de controlo de versões, o mesmo também é verdade para a construção de pipelines de análise robustos e reprodutíveis. Não importa qual é o <em>output</em> do pipeline: um simples gráfico, um reporte de análise estatística, uma publicação científica, um modelo de aprendizagem automática treinado que pretendemos ligar a uma API… se o código do projecto não for versionado, corremos grandes riscos e o pipeline não é reprodutível.</p>
<p>Mas o que é o controlo de versões?</p>
<p>O controlo de versões permite rastrear as alterações feitas aos ficheiros de texto (como os <em>scripts</em> de R). Qualquer alteração feita em qualquer ficheiro do projecto é catalogada, possibilitando raestrear como o ficheiro foi alterado, quem fez as alterações, e quando é que as alterações foram feitas. Com o uso do controlo de versões torna-se mais simples colaborar num projecto e forçar os membros da equipa a lidar explicitamente com potenciais conflitos que possam surgir, quando o mesmo ficheiro é alterado simultaneamente por pessoas diferentes. Se o nosso computar se perder, for roubado, ou explodir, os nossos projectos ficam guardados num sevidor: isto porque as ferramente de controlo de versões usam os servidor que faz o rastreamento das alterações (em alguns casos, este servidor pode ser o computador dum colega).</p>
<p>As ferramentas de controlo de versões também facilitam experimentar com novas ideias. Podemos começar um novo <em>branch</em> que basicamente faz uma cópia do nosso projecto. Neste novo <em>branch</em>, podemos experimentar em segurança novos recursos, e se as experiências não foram conclusivas, podemos simplesmente descartar o <em>branch</em>: a cópia orginal do nosso projecto permanece sem alterar. Também usamos branches para implementar novas funcionalidades, corrigir <em>bugs</em>, e gerir o projecto num paradigma designado como desenvolvimento com base no tronco (<em>trunk-based</em>).</p>
<p>Há várias ferramentas de controlo de versões mas o Git é sem dúvida a mais popular. Já o Github é um serviço de hospedagem de repositórios para os nossos projectos que também providencia outras ferramentas como rastrear <em>issues</em>, <em>wiki</em> de projecto, pedido de funcionalidades… e também a muito importante integração contínua. Embora isto possa parecer muito abstracto no final do próximo capítulo teremos todo o conhecimento necessário para usarmos o Git e o Github nos nossos projectos.</p>
<p>Precisamos de instalar o Git nos nossos computadores. Com o Git instalado, podemos começar logo a usá-lo e embora não precisemos duma conta no Github (ou num serviço semelhante) é recomendável que o façamos para facilitarmos a colaboração com outros. É também possível colaborar com várias pessoas usando o Git sem um serviço como o Github, configurando um repositório num servidor ou numa <em>drive</em> de rede mas isto cai fora do âmbito deste livro.</p>
<p>O Github oferece repositórios privados gratuitos, pelo que se não quisermos que o nosso trabalho seja público também o podemos usar. Só as pessoas que convidarmos para o nosso repositório privado poderão ver o seu conteúdo e colaborar connosco. Gitea, Gitlab, Bitbucket ou Codeberg são serviços semelhantes ao Github. Todos têm as suas vantagens e desvantagens.</p>
<p>As principais vantagens do Github são:</p>
<ul>
<li>Tem uma vasta comunidade de utilizadores;</li>
<li>Os seus serviços de integração contínua são de extrema utilidade, e tem mais de 2000 minutos mensais gratuitos.</li>
</ul>
<p>As desvantagens são:</p>
<ul>
<li>Foi comprado pela Microsoft em 2018;</li>
<li>Não é possível termos a nossa própria instância do Github (pelo nemos, não de forma gratuita).</li>
</ul>
<p>O facto de ser rpropriedade da Microsoft pode não parecer um problema, mas o registo prévio de aquisições da Microsoft é discutível, e também <a href="https://web.archive.org/web/20230130103241/https://www.theverge.com/2021/7/7/22561180/github-copilot-legal-copyright-fair-use-public-code">a discussão recente sobre o uso do código fonte hospedade no Github para treinar modelos de <em>machine learning</em> (Copilot)</a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> pode deixar-nos desconfortáveis sobre confiar demasiado no Github.</p>
<p>Embora utilizemos o Github para hospedar o nosso projecto, praticamente tudo o que vamos fazer pode ser transferido para outra plataforma de hospedagem de código como o Gitlab ou o Bitbucket, se assim quisermos. A instalação e configuração do Git é sempre igual independentemente do serviço de hospedagem que escolhermos e todos os comandos que vamos usar para interagir com o nosso repositório também serão os mesmos. Mas as duas vantagens que referimos em cima, de facto dão ao Github um <em>plus</em>: muitos desenvolvedores, investigadores e cientistas de dados têm já uma conta no Github e se um dia precisarmos da colaboração doutras pessoas é bem provável que tambám já tenham uma conta no Github e não noutro serviço de hospedagem.</p>
<p>Mas o que diferencia o Github é o Github Actions, o serviço de integração contínua do Github. O Github Actions é literalmente um computador na <em>cloud</em> que podemos usar para executarmos um conjunto de acções sempre que interagimos com o repositório (ou em momentos definidos por nós). Por exemplo, é possível executar testes automáticos sempre que um colaborador sobe alguma alteração ao projecto. Desta forma, podemos garantir que nenhuma alteração introduz um <em>bug</em>. Tomemos como exemplo este livro, sempre que escrevemos e subimos uma nova secção ou um novo capítulo, o website deste livro é gerado de novo e atualizado automaticamente. Cada conta do Github tem 2000 minutos mensais de computação gratuita, o que é bastante. Na parte 2, utilizaremos o Github Actions para executarmos um RAP na <em>cloud</em>, simplesmente subindo <em>updates</em> para o nosso código no Github.</p>
<p>A este propósito, importa sublinahr que NÃO devemos colocar projectos rastreados pelo Git em serviços de cloud como o Dropbox, o Onedrive ou semelhantes.Deve ficar bem claro que não devemos rastrear projectos simultaneamente com o Git e o Dropbox (ou algo parecido). Isto porque o Dropbox não lida bem com conflitos: se dois colaboradores fazem alrterações ao mesmo ficheiro, o Dropbox faz duas copias desse ficheiro. E neste caso um dos colaboradores tem de lidar manualmente com os conflitos potenciais. O problema é que dentro do projecto rastreado pelo Git, há uma pasta oculta com muitos ficheiros usados para sincronizar o projecto e garantir que tudo corre sem sobressaltos. Se colocarmos um projecto com o Git ativo dentro duma pasta do Dropbox, esses ficheiros serão acessados simultaneamente por várias pessoas e o Dropbox vai começar a fazer copias deles, devido aos conflitos. Isto baralha por completo o projecto e pode levar mesmo à perda de dados. Deixemos que seja apenas o Git a trarar do rastreamento e das colaborações. Pode parecer mais complexo do que Uim serviço do tiPO Dropbox, e é, mas é muito mais potente, e, seja qual for a curva de aprendizagem, mais do que compensa, devido às diversas funcionalidades a que passamos a ter acesso. Ao contrário do Dropbox (ou serviço semelhante), o Git lida com conflitos não por ficheiro mas por linha. Assim se dois colaboradores alteram o mesmo ficheiro mas linhas diferentes não teremos um conflito: o Git trata de juntar as alteraçõe por ele.</p>
<p>Finalmente, há algo importante que devemos compreender, e que às vezes confunde algumas pessoas: se o repositório é publico não quer dizer que qualquer pessoa pode fazer alterações ao código. Apenas significa que qualquer pessoa pode fazer o <em>fork</em> do repositório (basicamente fazer uma cópia do repositório para a sua conta Github) e depois sugerir alterações designadas como <em>pull-requests</em>. O dono do repositório pode depois decidir se aceita ou não essas sugestões.</p>
<p>No resto deste capítulo vamos aprender a instalar o Git na nossa máquina, a abrir uma conta no Github e começar a usá-la. Depois veremos alguns cenários:</p>
<ul>
<li>como colaborar em equipa num projecto;</li>
<li>como contribuir para o projecto de outros.</li>
</ul>
<section id="instalar-e-abrir-uma-conta-no-github" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="instalar-e-abrir-uma-conta-no-github"><span class="header-section-number">4.1</span> Instalar e abrir uma conta no Github</h2>
<p>Para instalar o Git num macOS ou num Windows basta seguir as instrições de <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git Book</a><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. É tão fácil como instalar outro qualquer programa.</p>
<p>Dependendo do sistema operativo que estamos a usar, pode também ser instalado, com o Git, um interface gráfico com o utilizador, possibilitando o seu uso fora da linha de comandos. Tmabémé possível usar o Git através do RStudio ou de muitos outros editores. Aqui não vamos usar nenhum interface gráfico com o utilizador uma vez que não há um interfce que possamos dmizer que seja universal. O único universal é a linha de comandos. Além disso, se aprendermos a usar o Git através da linha de comandos teremos a vida facilitada quando precisarmos de o usar num servidor.</p>
<p>Usar a linha de comandos não é assim tão dificil como pode parecer.</p>
<p>Se ainda não tivermos uma conta de Github então é uma boa altura para a criarmos. Basta visitarmos a página <a href="https://github.com/">https://github.com/</a>, seguir as instruções e selecionar o nível gratuito para abrirmos a nossa conta.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="IMG/git_1.png" class="img-fluid figure-img" width="454"></p>
<figcaption>E é o nosso <em>dashboard</em> Github.</figcaption>
</figure>
</div>
</div>
</div>
<p>Na próxima secção vmos a aprender alguns comandos básicos do Git para versionarmos os dois <em>scripts</em> que já escrevemos.</p>
</section>
<section id="git-básico" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="git-básico"><span class="header-section-number">4.2</span> Git básico</h2>
<p>Vamos usar os dois scripts que escrevemos num capítulo anterior. Podemos começar por criar uma pasta chamada <code>housing</code> e colocar lá os dois scripts que escrevemos anteriormente:</p>
<ul>
<li><code>save_data.R</code>: <a href="https://is.gd/7PhUjd">https://is.gd/7PhUjd</a></li>
<li><code>analysis.R</code>: <a href="https://is.gd/qCJEbi">https://is.gd/qCJEbi</a></li>
</ul>
<p>Vamos abrir a pasta que tem os dois ficheiros através do explorador de ficheiros. No windows, com o botão direiro do rato, em qualquer espaço branco dentro da pasta com os ficheiros, selecionamos a opção “Open Git Bash here”. A outra opção, e que funciona tanto em Linux, como em macOS e Windows, é abrirmos um terminale navegarmos para a nossa pasta usando <code>cd</code> (<strong>c</strong>hange <strong>d</strong>irectory).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> /home/user/housing/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Vamos garantir que estamos na pasta certa, <strong>l</strong>i<strong>s</strong>tando o seu conteúdo:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A partir de agora temos de garantir que escrevemos os comandos no terminal, em esp+ecífcio no terminal Git BAsh no Windows. Para destinguirmos este terminal do <em>prompt</em> da linha de comandos do R, o prompt do terminal Git Bash começará por <code>owner@localhost</code>. O <code>owner</code> é o nome do utilizador do gestor do projecto nos nossos exemplos a partir daqui, o <code>owner</code> do computador usado por este gestor de projecto é designado <code>localhost</code> (este prompt pode ser diferente de computador parfa computador, às vezes aparece o caminho completo para a directoria do projecto). Isto é o que acontecequando o <code>owner</code> corre <code>ls</code> no directório raíz do projecto:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ ls</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">analysis.R</span> save_data.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(também há a opção do comando <code>ls -la</code> que também lista ficheiros ocultos)</p>
<p>Devemos garantir que vemos os ficheiros quando executamos <code>ls</code>. Se não os virmos é porque não estamos na directoria correcta.</p>
<p>Podemos agora começar a rastrear estes ficheiros com o Git. No mesmo terminal onde fizemos <code>ls</code>, vamos executar o seguinte comando <code>git</code>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git init</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> Using <span class="st">'master'</span> as the name for the initial branch.</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> This default branch name is subject to change. </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> To configure the initial branch name to use in all of your</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> new repositories, which will suppress this warning, call:</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span>   git config <span class="at">--global</span> init.defaultBranch <span class="op">&lt;</span>name<span class="op">&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> Names commonly chosen instead of <span class="st">'master'</span> are <span class="st">'main'</span>, </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> <span class="st">'trunk'</span> and <span class="st">'development'</span>. The just-created branch can be </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> renamed via this command:</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span>   git branch <span class="at">-m</span> <span class="op">&lt;</span>name<span class="op">&gt;</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="ex">Initialized</span> empty Git repository in /home/user/housing/.git/</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>vamos gastar algum tempo a ler estes <em>hint</em>. Muitos comandos <code>git</code> dão-nos pistas e é sempre uma boa ideia lê-los. Este <em>hint</em> diz-nos que o nome do <em>branch</em> por defeito é “master” mas que isto é alterável. Um <em>branch</em> é como uma versão do nosso código. O <em>branch</em> “master” terá a versão por defeito do nosso código. Mas podemos criar um <em>branch</em> designado “dev” que terá uma versão do nosso código com funcionalidades ainda em desenvolvimento. Não há nada de especial o branch por defeito chamado “master” e podeia ter sido designado doutra forma qualquer. Por exemplo, se criamos um repositório primeito no Github em vez de o criarmos no nosso computador, o nome por defeito do branch será “main”. Temos de ter atenção a estas coisas pois quando começarmos a interagir com o nosso repositório no Github, temos de garantir que temos no nome certo do <em>branch</em> presente. Além disso, por o branch “master” ser o mais importante, ás vezes é chamado de “trunk”, principalmente por equipas que fazem desenvolvimento <em>base-trunk</em>.</p>
<p>Vamos agora executar o comando <code>git</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git status</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">On</span> branch master</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="ex">No</span> commits yet</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Untracked</span> files:</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">(</span><span class="ex">use</span> <span class="st">"git add &lt;file&gt;..."</span> to include in what will be committed<span class="kw">)</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="ex">analysis.R</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="ex">save_data.R</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="ex">nothing</span> added to commit but untracked files present <span class="er">(</span><span class="ex">use</span> <span class="st">"git add"</span> to track<span class="kw">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>O Git diz-nos que vê dois ficheiros mas que não estãop a ser rastreados. Logo se os modificarmos o Git não fará registo das alterações. Então é uma boa ideia fazermos o que o Git nos está a dizer para fazermos: vamos adicioná-los para que o Git os possa rastrear:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git add</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Nothing</span> specified, nothing added.</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> Maybe you wanted to say <span class="st">'git add .'</span><span class="pp">?</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> Turn this message off by running</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="ex">hint:</span> <span class="st">"git config advice.addEmptyPathspec false"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Se fizermos apenas <code>git add</code> não acontece nada. precisamos de especificar que ficheiros queremos adicionar. Podemos nomeá-los um a um, por exemplo <code>git add file1.R file2.tx</code>, mas podemos simplesmente adicionar todos os ficcheiros da pasta simplesmente usando <code>.</code> e ver o que se passa.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git add .</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Desta vez não temos nenhuma mensagem, será uma coisa boa? Vamos executar <code>git status</code> e ver o que aconteceu:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git status</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">On</span> branch master</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="ex">No</span> commits yet</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Changes</span> to be committed:</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">(</span><span class="ex">use</span> <span class="st">"git rm --cached &lt;file&gt;..."</span> to unstage<span class="kw">)</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        <span class="ex">new</span> file:   analysis.R</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>        <span class="ex">new</span> file:   save_data.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Óptimo! os nossos ficheiros já estão a ser rastreados e podemos fazer o <em>commit</em>. Ou seja, fazemos <em>commit</em> quando estamos satisfeitos com o nosso trabalho e queremos guardar um instantâneo. Estes instantâneos podem então ser subidos para o Github (com um <code>push</code>). Desta maneira, as alterações ficam dispioníveis para outros colaboradores baixarem (<code>pull</code>). Voltaremos a estes conceitos mais adiante. Devemos também saber que existe um ficheiro especial chamado <code>.gitignore</code> que nos permite listar ficheiros e pastas que queremos que sejam ignmoradas pelo Git. Isto pode ser útil caso estejamos a trabalhar com dados sensíveis que não queremos subir para o github. Para já não usaremos o <code>.gitignore</code>, voltaremos a ela na parte 2 do livro.</p>
<p>Estamos agora prontos para fazer o <em>commit</em> dos nossos ficheiros. Cada <em>commit</em> deve ter uma mensagem de <em>commit</em> e podemos escrever esta mensagem como uma opção do comando <code>git commit</code>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git commit <span class="at">-m</span> <span class="st">"Project start"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A opção <code>-m</code> serve para especificarmos a mensagem do <em>commit</em>. Voltemos a executar <code>git status</code>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git status</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">On</span> branch master</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nothing</span> to commit, working tree clean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Isto sgnifica quie todas as alterações estão registadas num <em>commit</em>. Ou seja depois de fazermos o <em>push</em>, poderiamos queimar o nosso computador pois todas as alterações já estariam no Github.com. Podemos também optar por não fazer o <em>push</em> ainda e continuarmos a trabalhar e a fazer <em>commit</em>. Por exemplo, poderiamos fazer 5 <em>commit</em> e só depois fazer o <em>push</em> e assim os 5 commit subiriam para o github.com.</p>
<p>Vamos agora alterar um dos ficheiros. Abrimos <code>analysis.R</code> num editore simplesmente alteramos o início do ficheiro adicionando uma linha. Ou seja, de:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>para:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This script analyses housing data for Luxembourg</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>e voltamos a fazer <code>git status</code>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git status</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">On</span> branch master</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Changes</span> not staged for commit:</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">(</span><span class="ex">use</span> <span class="st">"git add &lt;file&gt;..."</span> to update what will be committed<span class="kw">)</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">(</span><span class="ex">use</span> <span class="st">"git restore &lt;file&gt;..."</span> to discard changes in working directory<span class="kw">)</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>        <span class="ex">modified:</span>   analysis.R</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="ex">no</span> changes added to commit <span class="er">(</span><span class="ex">use</span> <span class="st">"git add"</span> and/or <span class="st">"git commit -a"</span><span class="kw">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Uma vez que o ficheiro está rastreado, o Git pode dizer-nos que alguma coisa foi alterada mas que não está num <em>commit</em>. Ou seja, se o nosso computador entrasse em auto-combustão estas alterações estriam perdidas para sempre. É melhor fazermos o <em>commit</em> e depois o <em>push</em> para o Github, o mas depressa possível.</p>
<p>lembremo-nos que primeniro temos de adicionar as alterações a um commit com <code>git add .</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git add .</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>e depois podemos fazer o <em>commit</em> das alterações com uma mensagem de <em>commit</em>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git commit <span class="at">-m</span> <span class="st">"Added a comment to analysis.R"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>As mensagens de <em>commit</em> devem ser o mais curtas e explicitas possível. Embora possa não ser fácil, compebnsa ter mensagens curtas e claras. De forma ideal, devemos procurar fazer <em>commits</em> pequenos, se possível um <em>commit</em> para cada alteração. Por exemplo se estivermos a adicionar ou corrigir comentários no nosso <em>script</em>, quan do terminarmos esta tarefa devemos fazer um <em>commit</em>. Depois, talvez fazermos um pouco de limpeza de código. Este é um <em>commit</em> separado. Assim podemos rever ou voltar a alterações anteriores duma forma mais simples. E isto será fundamental quando tivermols uma abordagem <em>trunk-based</em> paar colaboramos com outros colegas num projecto. Geralmente não é boa ideia passarmos o dia a fzer código e no fim do dia fazermos um <em>commit</em> enorme, mas muitas vezes é o que acontece.</p>
<p>Mesmo que as nossas alterações ainda não estejam no Github, já podemos voltar a um commit prévio. Suponhmos que apagamos acidentalmente um ficheiro com:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ rm analysis.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>vamso executar <code>git status</code> e ver as alterações (é a linha que começa por <code>delete</code>):</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">On</span> branch master</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Changes</span> not staged for commit:</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">(</span><span class="ex">use</span> <span class="st">"git add/rm &lt;file&gt;..."</span> to update what will be committed<span class="kw">)</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">(</span><span class="ex">use</span> <span class="st">"git restore &lt;file&gt;..."</span> to discard changes in working directory<span class="kw">)</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>        <span class="ex">deleted:</span>    analysis.R</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="ex">no</span> changes added to commit <span class="er">(</span><span class="ex">use</span> <span class="st">"git add"</span> and/or <span class="st">"git commit -a"</span><span class="kw">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Pois, ficamos sem <code>analysis.R</code>. E quando apagamos na consola significa que ficamos sem ele para sempre. Bem, tecnicamente não, há sempre maneiras de recuperar ficheiros apagados usando as ferrementas certas, mas como estamos a usar o Git, podemos usá-lo para recuperar o ficheiro. Uma vez que ainda não fizemos o <em>commit</em> podemos apenas dizer ao Git para ignorar as alterações. A maneira mais simples é fazer o <em>stash</em> das alterações e depois fazer o <em>drop</em> do <em>stash</em>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git stash</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Saved</span> working directory and index state WIP on master: <span class="dt">\</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  ab43b4b Added a comment to analysis.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A eliminação foi mandada fora (se a quisermos de volta, podemos tê-la com <code>git stash pop</code> ) e o nosso projecto voltou ao momento do último <em>commit</em>. Vejamos os ficheiros:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ ls</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">analysis.R</span> save_data.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Aí está ele. Podemos agora livrar-nos do stash com <code>git stash drop</code>. Mas e se tivéssemos apagado o ficheiro e feito o <em>commit</em>? Nesse cenário não poderiamos usar o <code>git stash</code>, mas poderiamos reverter o <em>commit</em>. Vamos experimentar, primeiro eliminado o ficheiro:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ rm analysis.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>vejamos o <em>status</em> atual, com <code>git status</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">On</span> branch master</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Changes</span> not staged for commit:</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">(</span><span class="ex">use</span> <span class="st">"git add/rm &lt;file&gt;..."</span> to update what will be committed<span class="kw">)</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">(</span><span class="ex">use</span> <span class="st">"git restore &lt;file&gt;..."</span> to discard changes in working directory<span class="kw">)</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        <span class="ex">deleted:</span>    analysis.R</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="ex">no</span> changes added to commit <span class="er">(</span><span class="ex">use</span> <span class="st">"git add"</span> and/or <span class="st">"git commit -a"</span><span class="kw">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Vamos adicionar as alterações e fazer o <em>commit</em>:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git add .</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git commit <span class="at">-m</span> <span class="st">"Removed analysis.R"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">[master</span> 8e51867] Removed analysis.R</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a> <span class="ex">1</span> file changed, 131 deletions<span class="er">(</span><span class="ex">-</span><span class="kw">)</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a> <span class="ex">delete</span> mode 100644 analysis.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Voltamos a ver o <em>status</em>:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git status</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">On</span> branch master</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="ex">nothing</span> to commit, working tree clean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Feito! O <code>git stash</code> não nos pode ajudar. Para recuperarmos o ficheiro precisamos de saber qual é o <em>commit</em> para o qual queremos voltar. Cada <em>commit</em> para além duma mensagem tyem um identificador único qua podemos aceder através de <code>git log</code>:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git log</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">commit</span> 8e51867dc5ae89e5f2ab2798be8920e703f73455 <span class="er">(</span><span class="ex">HEAD</span> <span class="at">-</span><span class="op">&gt;</span> master<span class="kw">)</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Author:</span> User <span class="op">&lt;</span>owner@mailbox.com<span class="op">&gt;</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Date:</span>   Sun Feb 5 17:54:30 2023 +0100</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Removed</span> analysis.R</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="ex">commit</span> ab43b4b1069cd987685253632827f19d7a402b27</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="ex">Author:</span> User <span class="op">&lt;</span>owner@mailbox.com<span class="op">&gt;</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="ex">Date:</span>   Sun Feb 5 17:41:52 2023 +0100</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Added</span> a comment to analysis.R</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="ex">commit</span> df2beecba0101304f1b56e300a3cd713ce7366e5</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="ex">Author:</span> User <span class="op">&lt;</span>owner@mailbox.com<span class="op">&gt;</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="ex">Date:</span>   Sun Feb 5 17:32:26 2023 +0100</span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Project</span> start</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>O primeiro, a partir de cima, é o último <em>commit</em> que fizemos. Queremos voltar para o que tem a mensagem “Added a comment to analysis.R”. O identificador único do <em>commit</em> é dado pela sequência longa de caracteres e designa-se por <em>hash</em>. Precisamos de o copiar (bastam os primeiros 10 caracteres). Agora podemos reverter para o <em>commit</em> correcto com o comando:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git revert ab43b4b1069cd98768..HEAD</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>e está feito! Podemos verificar que está tudo certo, executando <code>ls</code> e vendo que temos o ficheiro de novo, fazemos <code>git log</code> para lermos o <em>log</em> do que fizemos:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git log</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">commit</span> b7f82ee119df52550e9ca1a8da2d81281e6aac58 <span class="er">(</span><span class="ex">HEAD</span> <span class="at">-</span><span class="op">&gt;</span> master<span class="kw">)</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Author:</span> User <span class="op">&lt;</span>owner@mailbox.com<span class="op">&gt;</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Date:</span>   Sun Feb 5 18:03:37 2023 +0100</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Revert</span> <span class="st">"Removed analysis.R"</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="ex">This</span> reverts commit 8e51867dc5ae89e5f2ab2798be8920e703f73455.</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="ex">commit</span> 8e51867dc5ae89e5f2ab2798be8920e703f73455 <span class="er">(</span><span class="ex">HEAD</span> <span class="at">-</span><span class="op">&gt;</span> master<span class="kw">)</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="ex">Author:</span> User <span class="op">&lt;</span>owner@mailbox.com<span class="op">&gt;</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Date:</span>   Sun Feb 5 17:54:30 2023 +0100</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Removed</span> analysis.R</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a><span class="ex">commit</span> ab43b4b1069cd987685253632827f19d7a402b27</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="ex">Author:</span> User <span class="op">&lt;</span>owner@mailbox.com<span class="op">&gt;</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="ex">Date:</span>   Sun Feb 5 17:41:52 2023 +0100</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Added</span> a comment to analysis.R</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a><span class="ex">commit</span> df2beecba0101304f1b56e300a3cd713ce7366e5</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a><span class="ex">Author:</span> User <span class="op">&lt;</span>owner@mailbox.com<span class="op">&gt;</span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a><span class="ex">Date:</span>   Sun Feb 5 17:32:26 2023 +0100</span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Project</span> start</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Se usarmos um intervalo de <em>commits</em> em <code>git revert</code>, todos os commits são revertidos desde o inicial (não incluído) ao último. Neste exemplo, como apenas o commit iniciado por <code>8e51867dc5</code> está incluído, só este foi revertido. Isto é, teriamos obtido o mesmo resultado, se tivessemos executado <code>git revert 8e51867dc5</code>.</p>
<p>Este pequeno exemplo mostra como é útil o Git, mesmo sem o Github e mesmo que trabalhando sozinhos num projecto. No mínimo oferece-nos a possibilidade de reverter alterações e uma linha do tempodo nosso projecto. Talvez isto não nos impressiono uma vez que vivemos num mundo em que serviços de <em>cloud</em> como o Dropbox tornam estas coisas bem acessíveis. Mas é no trabalho colaborativo que o Git (junto com serviços como o Github) brilha e se destaca. O Gite e os serviços de hospedagem de códgo como o Github permitem colaborações a grande escala: milhares de desenvolvedores contribuem para o kernel Linux, possivelmemte o mais bem sucedido projecto <em>open-source</em>, alimentando muitos dos atuais smartphones, super computadores e computadores incorporados<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, e também podemos usar estas ferramentas para colaborações a uma escala pequena de forma muito eficiente.</p>
</section>
<section id="git-e-github" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="git-e-github"><span class="header-section-number">4.3</span> Git e Github</h2>
<p>Temos já algum trabalho feito na nossa máquina e já fizamos alguns <em>commits</em>. Já estamos prontos para fazermos o <em>push</em> desses <em>commits</em> para o Github. Fazer o <em>push</em> significa subir as alterações para o Github. Com isto podemos disponibilizar as alterações para colegas de trabalho se estivermos a usar um repositório privado ou então disponibilizá-las para o mundo se estivermos a usar um repositório público.</p>
<p>Antes de subirmos o que quer que seja para o Github, temos de criar um novo repositório. Este repositório terá o código do nosso projecto, bem como todas as alterações que temos estado a rastrear na nossa máquina, com o Git. No caso de adicionarmos um novo membro à equipa ele(a) poderá clonar o o repositório para o seu computador e ter acesso a todas as alterações, todos as mensagens de commit e toda a história do project. Se for público qualquer pessoa poderá clonar o projecto e contribuir com código. Vamos então ver alguns exemplos de como podemos colaborar com o Git usando o Github.</p>
<p>Vamos começar por ir para (https://github.com/)[https://github.com/] e criar um repositório:</p>
<figure class="figure">
<img src="IMG/git_new_repo.png" alt="Creating a new repository from your dashboard." class="figure-img">
<figcaption>
Criamos um novo repositório a partir do nosso dashboard.
</figcaption>
</figure>
<p>Seremos direcionados para a página:</p>
<figure class="figure">
<img src="IMG/git_new_repo_2.png" alt="Name your repository and choose whether it's a public or private repository." class="figure-img">
<figcaption>
nomeamos o repositório e definimos se deve ser um repositório público ou privado.
</figcaption>
</figure>
<p>Nomeamos o nosso repositório (1), e defenimos se deve ficar aberto para o mundo ou se qpenas deve ficar disponível para os nossos colegas de trabalho (2). Vamos fazer com que seja um repositório público.</p>
<p>Clicamos em <em>Create repository</em> e seremos encaminhados para a página:</p>
<figure class="figure">
<img src="IMG/git_repo_start.png" alt="Some instructions to get you started." class="figure-img">
<figcaption>
Algumas instruções para arrancarmos.
</figcaption>
</figure>
<p>Podemos ver algunas instruções para começarmos o nosso projecto. A primeira coisa que devemos fazeré clicar em “SSH”:</p>
<figure class="figure">
<img src="IMG/git_repo_start_ssh.png" alt="Make sure to select 'SSH'." class="figure-img">
<figcaption>
Asseguramo-nos de que selecionamos ‘SSH’.
</figcaption>
</figure>
<p>Com isto alteramos o link das instruções de <code>https</code> para <code>ssh</code>. Veremos mais à frente porque é que isto é importante. Para já, vamos ler as instruções. Uma vez que já comaçamos a trabalhar devemos seguir as instruções com o título <em>“… or push an existing repository from the command line”“</em>. Vamos rever estes comandos. O Github sugere-nos:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> remote add origin git@github.com:rap4all/housing.git</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> branch <span class="at">-M</span> main</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin main</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>O mais importante são a primeira e a terceira linhas. A promeira adiciona o remoto (referido aqui como <em>origin</em>) que direciona para o nosso repositório. O <em>link</em> tem o nome de utilizador e o nome do projecto. Assim sempre que fazemos push, as nossas alterações serão subidas para o Github. A segunda linha altera o nome do branch <em>master</em> para <em>main</em> mas isto é meramente opcional pelo que vamos manter o nome <em>master</em> para o nosso <em>branch</em>. E por fim, o último comando faz o <em>push</em> das nossas alterações (aqui devemos trocar <em>“main”</em> por <em>“master”</em>, uma vez que não executámos a segunda linha).</p>
<p>vamos então executar os comandos:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git remote add origin git@github.com:rap4all/housing.git</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Este comando não devolve nenhum output e podemos fazer o <em>push</em>:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git push <span class="at">-u</span> origin master</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>e falhou:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ERROR:</span> Permission to rap4all/housing.git denied to b-rodrigues.</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="ex">fatal:</span> Could not read from remote repository.</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Please</span> make sure you have the correct access rights</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="ex">and</span> the repository exists.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A razão porque falhou é simples: o Github não faz ideia de quem somos. Lembremo-nos que se o repositório for público, qualquer pessoa pode cloná-lo. MAs isto não quer dizer que qualquer pessoa pode fazer <em>push</em> de código para o repositório. Ou seja, percisamos de uma maneira de dizer ao Github que somos os donos do repositório. Para isto, precisamos de duam forma segura de nos logarmos e vamos fazê-lo utilizando uma chave emparelhada de encriptação RSA público/privado. A ideia é simple. vamos gerar dois ficheiros no nosso computador. Estes dois ficheiros forma uma chave emparelhada público/privado. Subimos a chave pública para o Github; e sempre que quisermos interagir com o Github, este verificará a chave pública com a chave privada que temos na nossa máquina (nunca devemos enviar a nossa chave privada para ninguém). Se houver emparelhamento, o Github sabe que somos quem dizemos ser e deixanos fazer o <em>push</em> para o repositório. Por esta razão alteramos de <code>https</code> para <code>ssh</code> aqui a atrasado.</p>
<p>Vamos então gerar a chave emparelhada RSA público/privado. Num terminal Git Bash do Windows, executamos o comando:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ ssh-keygen</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Poderemos ver as seguintes linhas:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Generating</span> public/private rsa key pair.</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Enter</span> file in which to save the key <span class="er">(</span><span class="ex">/home/user/.ssh/id_rsa</span><span class="kw">)</span><span class="bu">:</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Se não escrevermos nada e apenasfizermos “Enter”, veremos a mensagem:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Enter</span> passphrase <span class="er">(</span><span class="ex">empty</span> for no passphrase<span class="kw">)</span><span class="bu">:</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Podemos também apenas fazer “Enter”. Não precisamos de definir uma palavra passe uma vez que a própria chave emparelhada <code>ssh</code> tratará de fazer o <em>login</em>. em alguns casos a palavra passe pode ser útil se tivemos receio de que alguém posa ter acesso fício à nossa máquina e que possa fazer push de código fazendo-se passar por nós. Mas se tivermos este tipo de receios então se calhar nem deveriamos usar o Github.</p>
<p>Ao fazermos “Enter”, é-nos pedido para comfirmarmos a palavra passe:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Enter</span> same passphrase again: </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>E qaui volamos a fazer “Enter” sem escrevermos nada. Agora deverá aparecer a mensagem</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Your</span> identification has been saved in /home/user/.ssh/id_rsa</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Your</span> public key has been saved in /home/user/.ssh/id_rsa.pub</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> key fingerprint is:</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="ex">SHA256:tPZnR7qdN06mV53Mc36F3mASIyD55ktQJFBAVqJXNQw</span> owner@localhost</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> key<span class="st">'s randomart image is:</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="st">+---[RSA 3072]----+</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="st">|   .*=E*=.       |</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="st">|   o o.oo.. .    |</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="st">|  . .  o.  o o   |</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a><span class="st">|   .  ..o.  . o  |</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="st">|       +S    o.+.|</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="st">|       .o.   o.o*|</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a><span class="st">|       . o. + +=*|</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a><span class="st">|        .  o ++*=|</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a><span class="st">|            ..=oo|</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="st">+----[SHA256]-----+</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Se formos para o caminho especificado na primeira linha (no nosso caso será <code>/home/user/.ssh/</code>) deveremos ver dois ficheiros, <code>id_rsa</code> e <code>id_rsa.pub</code>, as chaves privada e pública erspectivamente. Está quase: apenas temos de copiar o conteúdo do ficheiro <code>id_rsa.pub</code> para o Github.</p>
<p>Em <em>“Settings”</em>:</p>
<figure class="figure">
<img src="IMG/github_settings.png" alt="Click on your user profile's image in the top-right corner." class="figure-img">
<figcaption>
Clicamos na nossa imagem de utilizador no canto superior direito.
</figcaption>
</figure>
<p>e depois clicamos em <em>“SSH and GPG keys”</em>:</p>
<figure class="figure">
<img src="IMG/github_gpg.png" alt="Go to your user settings and choose 'SSH and GPG keys'." class="figure-img">
<figcaption>
Nas definições do utilizador, escolhemos ‘SSH and GPG keys’.
</figcaption>
</figure>
<p>clicamos em <em>“New SSH key”</em>. Damos um nome a esta chave que sirva para reconhecermos a máquina que gerou a chave, colamos o conteúdo de <code>id_rsa.pub</code> na caixa de texto e clicamos em <em>“add SSH key”</em>:</p>
<figure class="figure">
<img src="IMG/github_add_ssh.png" alt="Copy the contents of the public key here." class="figure-img">
<figcaption>
Copiamos o conteúdo da chave pública aqui.
</figcaption>
</figure>
<p>Podemos voltar para o nosso terminal e tentar de novo fazer o <em>push</em>:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="ex">owner@localhost</span> ➤ git push <span class="at">-u</span> origin master</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Aparece a mensagem:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="ex">The</span> authenticity of host <span class="st">'github.com (140.82.121.3)'</span> can<span class="st">'t be established.</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="st">ED25519 key fingerprint is SHA256:+DiY3wvvV6TuJJhbpZisF/zLDA0zPMSvHdkr4UvCOqU.</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="st">This key is not known by any other names</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="st">Are you sure you want to continue connecting (yes/no/[fingerprint])?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>escrevemos <code>yes</code> e devemos ver a seguinte informação:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Enumerating</span> objects: 10, done.</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Counting</span> objects: 100% <span class="er">(</span><span class="ex">10/10</span><span class="kw">)</span><span class="ex">,</span> done.</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Delta</span> compression using up to 4 threads</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Compressing</span> objects: 100% <span class="er">(</span><span class="ex">9/9</span><span class="kw">)</span><span class="ex">,</span> done.</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="ex">Writing</span> objects: 100% <span class="er">(</span><span class="ex">10/10</span><span class="kw">)</span><span class="ex">,</span> 2.77 KiB <span class="kw">|</span> <span class="ex">2.77</span> MiB/s, done.</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="ex">Total</span> 10 <span class="er">(</span><span class="ex">delta</span> 2<span class="kw">)</span><span class="ex">,</span> reused 0 <span class="er">(</span><span class="ex">delta</span> 0<span class="kw">)</span><span class="ex">,</span> pack-reused 0</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="ex">remote:</span> Resolving deltas: 100% <span class="er">(</span><span class="ex">2/2</span><span class="kw">)</span><span class="ex">,</span> done.</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="ex">To</span> github.com:rap4all/housing.git</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a> <span class="ex">*</span> [new branch]      master <span class="at">-</span><span class="op">&gt;</span> master</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="ex">Branch</span> <span class="st">'master'</span> set up to track remote branch <span class="st">'master'</span> from <span class="st">'origin'</span>.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>E está feito! Os nossos <em>commits</em> estão agora guardados de forma segura no Github. Se formos paera a página prncipal do nosso repositório, deveremos ver:</p>
<figure class="figure">
<img src="IMG/github_repo_1.png" alt="Finally!" class="figure-img">
<figcaption>
Finalmente!
</figcaption>
</figure>
</section>
<section id="conhecendo-o-github" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="conhecendo-o-github"><span class="header-section-number">4.4</span> Conhecendo o Github</h2>
<p>Instalamos com sucesso o Git e pussemo-lo a trabalhar com a nossa conta do Github. Se usarmos outra máquina para fazermos desenvolvimento, precisaremos de gerar outra chave emparelhada RSA nessa máquina e adicionar a chave pública ao Github. Se usarmos outra plataforma de hospedagem de código podemos utilizr a mesma chave par RSA, mas teremos de adcionar a chave pública á essa outra plataforma de hospedagem.</p>
<p>Antes de continuarmos, vamos fazer um <em>tour</em> no Github.</p>
<figure class="figure">
<img src="IMG/github_repo_1.png" alt="Your repository's landing page." class="figure-img">
<figcaption>
Página inicial do nosso repositório.
</figcaption>
</figure>
<p>Na página do repositório vemos os mesmos ficheiros e pastas que estão na directoria raíz do projecto no nosso computador. Neste caso vemos dois ficheiros. O github sugere que adicionemos um ficheiro README; para já vamos ignorar. Atentemos ao menu em cima, debaixo do nome do repositório:</p>
<figure class="figure">
<img src="IMG/github_menu.png" alt="Several options to choose from." class="figure-img">
<figcaption>
Várias opções para escolha.
</figcaption>
</figure>
<p>As opções mais relevantes para nós serão: “Issues”, “Pull requests”, “Actions”, e “Settings”.</p>
<p>Vamos começar por <em>“Settings”</em>:</p>
<figure class="figure">
<img src="IMG/github_settings2.png" alt="Choose the 'Settings' tab." class="figure-img">
<figcaption>
Escolhemos a opção ‘Settings’.
</figcaption>
</figure>
<p>Há várias opções de escolha mas a mais importante para o nosso propósito é a opção <em>“Collaborators”</em>. è aqui que podemos convidar outras opessoas para contribuirem para o repositório. As pessoas convidadas a partir daqui podem fazer <em>push</em> directamente para o repositório. Vamos convidar ol autor deste livro.</p>
<figure class="figure">
<img src="IMG/github_add_collab.png" alt="Follow along to add a collaborator." class="figure-img">
<figcaption>
Seguir para adicionarmos um colaborador.
</figcaption>
</figure>
<p>Escrevemos o nome de utilizador Github da pessoa. Também podemos convidar colaboradores, dando o seu endereço de e-mail.</p>
<figure class="figure">
<img src="IMG/github_add_collab2.png" alt="Look for your collaborators." class="figure-img">
<figcaption>
Procuramos os nossos colaboradores.
</figcaption>
</figure>
<p>Clicamos no perfil do utilzador e ele(a) deverá receber um e-mail com o convite.</p>
<p>Este é o aspeto na perspetiva da conta do Bruno:</p>
<figure class="figure">
<img src="IMG/github_collab_added.png" alt="Bruno can now push as if he owned the repository." class="figure-img">
<figcaption>
O Bruno pode fazer push como se fosse dono do repositório.
</figcaption>
</figure>
<p>É importante compreender a distinção entre convidar alguém a contribuir para o repositório e ter alguém de fora do projeto a contribuir. Vamos explorar estes dois cenários na próxima secção, mas antes disso, vamos ver em que consiste o separador “Issues”.</p>
<p>Se o repositório for público, qualquer pessoa pode abrir um <em>issue</em> para reportar um <em>bug</em> ou para sugerir algumas ideias, se o repositório for privado apenas os colaboradores podem fazer isto.</p>
<p>Vamos abrir um <em>issue</em> para ilustrar como funciona:</p>
<figure class="figure">
<img src="IMG/github_new_issue.png" alt="Click on 'New issue' in the 'Issues' tab of your project." class="figure-img">
<figcaption>
Clicamos em ‘New issue’ no separdor ‘Issues’ do nosso projecto.
</figcaption>
</figure>
<p>Seremos reencaminhados para o interface:</p>
<figure class="figure">
<img src="IMG/github_new_issue_empty.png" alt="Write what the issue's about here." class="figure-img">
<figcaption>
Aqui escrevemos qual é o issue.
</figcaption>
</figure>
<p>Damos um bom título ao <em>issue</em> (1), adicionamos uma descrição pormenorizada (2), (opcionalmente) atribuimo-lo a alguém (3) e (opcionalmente) adicionamos-lhe uma etiqueta (4), finalmente clicamos em “Submit new issue” (5) para fazermos a submissão:</p>
<figure class="figure">
<img src="IMG/github_new_issue2.png" alt="Try to provide as many details as possible." class="figure-img">
<figcaption>
Devemos tentar dar o maior detalhe possível.
</figcaption>
</figure>
<p>Muitas vezes os <em>issues</em> não têm de ser longos e funcionam principalmente como lembretes. Por exemplo, o dono do repositório não teve tempo de adcionar um ficheiro README, mas não se quer esquecer de o fazer mais tarde. O autor atribui o <em>issue</em> ao Bruno. logo será responsabilidade do Bruno adicionar o README. A gestão de projectos orientada para <em>issues</em> é uma estratégia muito válida quando se trabalha de forma assíncrona e descentralizada.</p>
<p>Se encontrarmos um <em>bug</em> e quisermos abrir um <em>issue</em>, é muito importante demos um exemplo mínimo e reprodutível (MRE - minimal reproducible exemple). MREs são <em>chuncks</em> de código que podem ser executados facilmente por alguém para além de nós mesmos e que produzem o <em>bug</em> de forma confiável. Curiosamente, se compreendermos o que torna um MRE mínimo e reprodutível, compreendemos também o que tornará as nossas condutas reprodutíveis. Então, o que é importante para uma MRE?</p>
<p>Em primeiro lugar, o código tem de ser autónomo. Por exemplo, se forem necessários alguns dados, é necessário fornecer os dados. Se os dados forem sensíveis, é necessário pensar no erro com mais pormenor: o erro deve-se à estrutura dos dados ou manifesta-se em qualquer tipo de dados? Se for esse o caso, podemos usar alguns dos conjuntos de dados incorporados no R (iris, mtcars, etc) para o nosso MRE.</p>
<p>O nosso MRE precisa de pacotes extra para funcionar? Então devemos ser o mais claros possível, e não podemos dar apenas os nomes dos pacotes, mas temos de dar também suas versões (uma boa prática é copiar e colar o <em>output</em> de <code>sessionInfo()</code> no final do <em>issue</em>).</p>
<p>Por fim, o nosso exemplo depende de algum objeto definido no ambiente global? Se sim, também precisamos de dar o código para criar esse objeto.</p>
<p>A fasquia que precisamos de definir para um MRE é a seguinte: salvo dependências de pacotes que podem ser necessário instalar de antemão, as pessoas que nos tentam ajudar devem ser capazes de executar o nosso <em>script</em> simplesmente copiando-o e colando-o numa consola de R. Qualquer outra manipulação que lhes seja pedida não é aceitável: lembremo-nos que no desenvolvimento de código aberto, os programadores trabalham muitas vezes durante o seu tempo livre e não nos devem apoio técnico! E mesmo que o fizessem, é sempre uma boa ideia tornar-lhes a tarefa o mais fácil possível para nos ajudarem, pois isso simplesmente aumenta a probabilidade de que eles realmente nos ajudem.</p>
<p>Além disso, escrever uma MRE normalmente leva-nos a depurar o código. Tal como na depuração para <a href="https://en.wikipedia.org/wiki/Rubber_duck_debugging">patinhos de borracha</a><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>, com simples facto de tentarmos explicar o problema podemos descobrir onde está o erro. Mas ao escrevermos um MRE, estamos também a reduzir o problema às suas partes mais básicas, e a remover tudo o que é desnecessário. Ao fazê-lo, podemos aperceber-nos que o que pensavamos ser um <em>bug</em> dum pacote talvez fosse antes um problema na “interface entre o teclado e a cadeira”.</p>
<p>Por isso, não devemos subestimar a utilidade de criar MREs de alta qualidade para os nossos problemas! Um pacote que o pode ajudar nesta tarefa é o {reprex} (ver <a href="https://reprex.tidyverse.org/">aqui</a><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>).</p>
</section>
<section id="conclusão" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="conclusão"><span class="header-section-number">4.5</span> Conclusão</h2>
<p>Agora já temos o nosso primeiro repositório e já sabemos o básico sobre a utilização do Git e do Github.com. POdemos sempre rever os comandos em cima. Talvez adicionar mais alguns ficheiros ao nosso repositório, removê-los, tentar reverter certos commits, etc. Criar um novo repositório e tentar enviar alguns arquivos ou <em>scripts</em> para lá. Devemos dedicar realmente algum tempo para entendermos o que fizemos e como devemos usar estas ferramentas, pois são essenciais para a reprodutibilidade.</p>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>https://is.gd/rQgCj8<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>https://is.gd/9HZqW4<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>https://www.zdnet.com/article/who-writes-linux-almost-10000-developers/<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>https://en.wikipedia.org/wiki/Rubber_duck_debugging<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>https://reprex.tidyverse.org/<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

<p><a href="https://bioestatisticas.wixsite.com/bioestatisticas"><img src="IMG/logoOB.jpg" class="img-fluid"></a></p></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./project_start.html" class="pagination-link" aria-label="Início do projecto">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Início do projecto</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./github.html" class="pagination-link" aria-label="Colaboração com desenvolvimento *Trunk-based*">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Colaboração com desenvolvimento <em>Trunk-based</em></span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/balima78/rap_pt/edit/main/git.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/balima78/rap_pt/issues" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>